<form [formGroup]="form" (ngSubmit)="onSubmit()" class="flight-search-form">
  <!-- Fila superior: tipo de vuelo, clase y directo -->
  <div class="form-row form-row--options">
    <div class="radio-group">
      <label>
        <input type="radio" formControlName="tripType" value="roundtrip" checked />
        Ida y vuelta
      </label>
      <label>
        <input type="radio" formControlName="tripType" value="oneway" />
        Solo ida
      </label>
    </div>
    <div class="select-group">
      <select formControlName="cabinClass">
        <option *ngFor="let f of cabinClasses" [value]="f.value">
          {{f.label}}
        </option>
      </select>
    </div>
    <div class="checkbox-group">
      <label>
        <input type="checkbox" formControlName="directOnly" />
        Vuelos directos
      </label>
    </div>
  </div>

  <!-- Fila intermedia: origen, destino, fechas y viajeros -->
  <div class="form-row form-row--fields">
    <div class="field-group">
      <input type="text" formControlName="origin" placeholder="¿Desde dónde sales?" />
      <div *ngIf="form.get('origin')!.touched && form.get('origin')!.errors!" class="form-error">
        El origen es obligatorio.
      </div>
    </div>
    <div class="field-group">
      <input type="text" formControlName="destination" placeholder="¿A dónde vas?" />
      <div *ngIf="form.get('destination')!.touched && form.get('destination')!.errors!" class="form-error">
        El destino es obligatorio.
      </div>
      <div *ngIf="form.errors?.['origenIgualDestino'] && form.touched" class="form-error">
        El origen y el destino no pueden ser iguales.
      </div>
    </div>
    <div class="field-group">
      <input type="date" formControlName="departureDate" />
        <div *ngIf="form.get('departureDate')!.touched && form.get('departureDate')!.errors!" class="form-error">
          La fecha de ida es obligatoria.
        </div>
        <div *ngIf="form.errors?.['fechaNoValida'] && form.touched" class="form-error">
          La fecha no puede ser anterior a hoy.
        </div>
    </div>
    <div class="field-group">
      <input type="date" formControlName="returnDate" id="fechaVuelta" />
        <div *ngIf="form.get('returnDate')!.touched && form.get('returnDate')!.errors!" class="form-error">
          La fecha de vuelta es obligatoria.
        </div>
        <div *ngIf="form.errors?.['llegadaNoValida'] && form.touched " class="form-error">
          La llegada no puede ser anterior a la salida.
        </div>
    </div>
    <div class="field-group">
      <select formControlName="passengers">
        <option *ngFor="let n of [1,2,3,4,5]" [value]="n">
          {{n}} Pasajero{{ n > 1 ? 's' : '' }}
        </option>
        <div *ngIf="form.get('passengers')?.value < 1 || form.get('passengers')?.value > 5" class="form-error">
          El nº de pasajeros debe estar entre 1 y 5
        </div>
      </select>
    </div>
  </div>

  <!-- Fila inferior: acciones -->
  <div class="form-row form-row--actions">
    <button type="submit" class="btn-primary">Buscar vuelos</button>
  </div>

  <!-- Mensaje de error -->

</form>
